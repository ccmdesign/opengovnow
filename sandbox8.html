<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <title>#OpenGovNow - Alpha</title>
    
    <link rel="stylesheet" href="bower_components/fontello-icons/css/fontello.css" />
    <link rel="stylesheet" href="bower_components/imagereveal/css/jquery.imageReveal.css" />
    <link rel="stylesheet" href="css/app.css" />
    <link rel="stylesheet" type="text/css" href="css/beta-dataoverlay.css" />

    <link href='http://fonts.googleapis.com/css?family=Merriweather:300,300italic,700,700italic|Raleway:400,200,600' rel='stylesheet' type='text/css'>
    <script src="bower_components/modernizr/modernizr.js"></script>
    
     <meta property="og:image" content="http://openinggovernment.com/images/logo.png"/>
     <meta name="description” content=”Open is better. Check out how Open Government benefits you." />
     <meta name="title" content="Open Government"/>
 
</head>
<body>
     
    <aside class="m-menu">
      <h2>#opengovnow</h2>
      <nav>
        <a href="#c-what-is-opengov">What is Open Government?</a>
        <a href="#c-why-should-i-care">Why Should I Care?</a>
        <a href="#c-who-wants-it">Who Wants it?</a>
        <a href="#c-what-can-i-do">What Can I do?</a>
        <a href="#c-full-interviews">Full Interviews</a>
        <a href="#c-datasets">Download Datasets</a>
        <a href="#c-disclaimer">Survey Methodology</a>
      </nav>
    </aside>
    
<!-- ===== Basic Section Structure =====
  
  <div id="c-#" class="l-module">
    <section class="row">
      <h2>What is Open Government?</h2>

    </section>
  </div>
========================================-->
  <div id="c-compare-survey-graph" class="l-module show-for-medium-up">

      <section class="row">
        <div class="large-3 medium-3 column">
          <select name="country-left" id="country-left">
          </select>
        </div>

        <div class="large-6 medium-6 column">
          <select name="question" id="question">
            <option value="q1">How open is your government?</option>
            <option value="q2">Would you like your government to be more open?</option>
            <option value="q3">Would you be more likely to pay your taxes if your government were more open?</option>
            <option value="q4">Would you trust your government more if it were more open?</option>
            <option value="q5">Would you trust businesses more if businesses were more open?</option>
            <option value="q6">Would you like to have more information about your government?</option>
            <option value="q7"> Should citizens have a say in government spending and contracting?</option>
            <option value="q8">Do you think if your government were more open, it would be more effective?</option>
          </select>
        </div>

        <div class="large-3 medium-3 column">
          <select name="country-right" id="country-right">
          </select>
        </div>
      </section>
      <section class="row">
        <h3>This is the question text</h3>
        <div class="large-5 medium-6 column compare-countries left">
          <h4>Country on Left</h4>
          <p>Here we insert the exact same D3 bar chart used on the previous website. But we will render 1 graph for each of 2 countries selected the by the dropdowns above.</p>
          <p>This feature only shows on large screens.</p>
        </div>
        <div class="large-2 column show-for-large-only">
          
        </div>
        <div class="large-5 medium-6 column compare-countries right">
          <h4>Country on Right</h4>
          <p>Here we insert the exact same D3 bar chart used on the previous website. But we will render 1 graph for each of 2 countries selected the by the dropdowns above.</p>
          <p>This feature only shows on large screens.</p>
        </div>
      </section>
    </div>

  <footer>
    <section class="row">
      <div class="large-12 small-12 column">
        <p>The team would like to thank the creators of The Guardian <a href="http://www.theguardian.com/world/interactive/2013/nov/01/snowden-nsa-files-surveillance-revelations-decoded">“NSA Files Decoded”</a> feature for inspiring this work.</p>
        <p>All of the elements of this site follow <a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank">Creative Commons license</a>, and are intended for future use and reuse.</p>
      </div>
    </section>
  </footer>
  <div id="overlay"></div>
  
  <div class="dataoverlay dataoverlay-slidedown">
      <button type="button" class="dataoverlay-close">Close</button>
        <div class="chart"></div> 
    </div>

  <script src="js/jquery-latest.min.js"  type="text/javascript"></script>
  <script src="bower_components/imagereveal/js/jquery.imageReveal.js"></script>
  <script src="bower_components/foundation/js/foundation.min.js"></script>
  <script src="bower_components/d3/d3.js"></script>
  <script src="js/app.js"></script>
  <script src="js/svganimations.js"></script>
  <script src="js/classie.js"></script>
  <script src="js/jquery.lazyloadxt.extra.min.js"></script>
  <script src="js/jquery.inview.js"></script>
  <script src="js/socialmedia.js"></script>
  <script src="js/beta-dataoverlay.js"></script>
 <script src="js/d3.v3.min.js"></script>

<script type="text/javascript">

$( document ).ready(function() {

  GenerateCountries();

});


$("#country-left").add("#country-right").add("#question").change(function() {
  construct();
});

function GenerateCountries() {

  var countries;

    $.ajax({
        'async': false,
        'type': "GET",
        'global': false,
        'url': "php/countries.php",
        'success': function (data) {
            countries = data.split(',');
        }
    });  

    console.log(countries);  
    var countryLeft = document.getElementById('country-left');  
    var countryRight = document.getElementById('country-right');  
    for(var i = 0; i < countries.length; i++) 
    {
       var opt = document.createElement('option');
       opt.innerHTML = countries[i];
       opt.value = countries[i];
       countryRight.appendChild(opt);
    }

     for(var i = 0; i < countries.length; i++) 
    {
       var opt = document.createElement('option');
       opt.innerHTML = countries[i];
       opt.value = countries[i];
       countryLeft.appendChild(opt);
    }
}

function construct() { 

  var strCountryLeft = $("#country-left").val();

  var strCountryRight = $("#country-right").val();

  var strq = "";

    switch($("#question").val()) {
      case "q1":
          strq = "chart1a, chart1b, chart1c, chart1d";
          break;
      case "q2":
          strq = "chart4a, chart4b, chart4c";
          break;
      case "q3":
          strq = "chart5a, chart5b, chart5c";
          break; 
      case "q4":
          strq = "chart6a, chart6b, chart6c";
          break;    
      case "q5":
          strq = "chart7a, chart7b, chart7c";
          break;  
      case "q6":
          strq = "chart8a, chart8b, chart8c";
          break;    
      case "q7":
          strq = "chart9a, chart9b, chart9c";
          break;                 
      default:
          strq = "chart1a, chart1b, chart1c, chart1d";
      }

  var strQueryLeft = "Select " + strq + " from results where countryname = '" + strCountryLeft + "'";
 
  var strQueryRight = "Select " + strq + " from results where countryname = '" + strCountryRight + "'";
     
  console.log(strQueryRight) ;
  console.log(strQueryLeft);

$.ajax({
    type: 'POST',
    data: { leftdata: strQueryLeft,
            rightdata: strQueryRight,
        },
    url: 'php/Compare.php',
    dataType: 'json',
    async: false,

    success: function(result){
       console.log("tst");
    },

    error: function(){
         console.log("tst");
    }
  });


}

</script>

  <script>

      // var data = [40, 120, 150];

      // var x = d3.scale.linear().domain([0, d3.max(data)]).range(["0px", "200px"]);

      // d3.select(".chart")
      //   .selectAll("div")
      //   .data(data)
      //   .enter()
      //   .append('div')
      //   .style('height', function(d) { return d * 2 + "px"; }) //function(d) { return d * 2 + "px"; })
      //   .style("width", "30px") 
      //   .append('div') 
      //   .attr('class', 'legend')
      //   .text(function(d) { return d; })
 
  </script>

</body>
</html>